



0.0.4


0.0.5
- Fixed bug in grape.json_to_composite_type related to using non-public schemas
- New database functions: 
	* grape.list_query_whitelist_delete
	* grape.user_id_from_fullnames
	* grape.username_from_fullnames
	* grape.api_error()
	* grape.clean_telephone_number (_tel TEXT)
- Fix when granting access for guest

0.0.6
- Support HTTPS
- New options in config: use_https, sslkey and sslcert
- Grape DocumentStore alias ds ( grape.get('ds')... )
- DocumentStore supports new option use_date. This will create subdirectories based on the year and date when storing files
- Logger will now create a symlink to the current log file (for example all-current.log, session-current.log, etc.)
- Express bumped to version 4.13.4
- Bumped the following package versions: underscore, body-parser, cookie-parser, connect-multiparty
- All the Logger functions will now join all arguments and log it
- If the session id is found in cookies instead of X-SessionID header; a warning is printed
- Added new API call /grape/login. This does the same as /session/new but doesn't set any cookies
- Added new API call /grape/logout

0.0.7:
- API responses will now include the headers X-Permission-Code and X-Permission-Error for better error handling
- Added user.employee_guid and user.employee_data to store employee info from Savanna
- Enable "trust proxy" setting

0.0.8:
- Removing extremely low fill factors. Performance difference noticeable on serial columns
- Changes to accommodate ps_bgworker's writing to logfiles instead of database
- Reporting framework
- Caching comms: Only connect to messagesocket once socket create were successful

0.0.9:
- Read default_config.js if it exists 
- Hidden grape settings
- Fix deprecation warnings
- Store grape_version in settings
- user.username and process.pg_function is now UNIQUE
- Use XLSX.js for parsing of XLSX and XLS files
- Added GrapeClient class
- Data import will now create a table for each import containing the rows
- Added API calls to manipulate bgworker (/grape/bgworker/status, /grape/bgworker/start, /grape/bgworker/stop)
- New API call session_ping

0.1.0:
- Fix authentication bug (allowing any password)

0.1.1:
- Added DB function set_user_password with JSON access
- Session specific database connections will now close after inactivity
- Added column user.local_only BOOL to indicate if a user should be linked up to Savanna 
- Added column user.pg_role TEXT for future use
- New config setting guest_dburi to allow for a seperate guest DB connection
- Grape now supports multiple public directories through config.public_directories
- Grape now supports multiple API directories through config.api_directories
- Several security improvements when serving public files
- Moved all functions in gutils to object (instead of the prototype)
- Bumped versions of pg, express, body-parser, libxmljs, async

0.1.2:
- Bugfixes:
  * Logger fails when accept header isn't present
  * DB debugger was broken

0.1.3:
- Easy installer for DB notifications using new_notify_handler(channel, handler_callback)
- Static data manager
- Improve naming of log files

0.1.4:
- Do not try to do queries on dead connections
- If a DB disconnect, try to reconnect

0.1.5:
- Added GrapeMailer class

0.1.6:
- Added option http_port

0.1.7:
- Resolved error: 'column "is_local" of relation "user" does not exist' in 'db/data/grape.user.sql'

1.0.0
- Columns for process category and process function schema
- Columns and functions for autoscheduler
- Check syntax of JS files before sending it, preventing the entire page to break on an error
- Roles in list_query_whitelist
- Description and data_type for settings
- API calls and functions for settings

1.0.1:
- Added db function jsonb call to write API functions accepting JSONB instead of JSON
- API call /grape/process/:process_name/run to immediately run process function
- Added grape.api_success_if_not_null and grape.api_error_data_not_found
- API call /grape/process/autoscheduler/:autoscheduler_id
- Improved error handling for emailer
- Directly send login details from grape
- New grape setting system_url

1.0.2:


1.0.3:
- log in using email instead of username
- upload/import files to process data with data import functions
- create test tables from data import data
- append to existing test tables from data import data
- download data import files
- list query uses tablename as a regex pattern
- function to check if a date is a weekend day
- ability to parse csv files

1.0.4:
Major changes:
- Support for JSON schema API calls
- Fix bug related to order of multiple public directories
- Make __FILENAME__, __DIRNAME__ and __REALPATH__ available in client-side JavaScript
- Support custom headers in emails
- New function grape.send_email (_to TEXT, _template TEXT, _template_data JSON, _headers JSON)
- New API call  /grape/send_mail (send email via API call)
- New API calls GrapeInsertRecord, GrapeUpdateRecord and GrapeDeleteRecord
- SQL functions to manipulate access_path
- Examples of API calls added in examples/ directory
- New configuration option compile_js_dirs

1.0.5:
- New grape setting "dataimport_in_background" (boolean) will start a background process for the data import process function
- Role-based access control for processes (with utility functions and new table)
- New SQL functions: grape.set_session_username, grape.set_session_user_id, grape.upsert_process
- New API call GrapeListProcessCategories
- Removed DB function grape.resend_user_password
- GrapeForgotPassword will now reset the password if passwords in the system are hashed
- Fixed bug GR29 in list query (Ettienne)

1.0.6:
Bug fixes:
- Fix password sent in password forgot email
- Fixed GrapeClient issues with uploading files
- Fixed data import upload if spreadsheet has missing header (this caused the server to restart)
- Fixed race condition - queries are allowed through, even though grape.user_id is not set in the SQL
- Better error reporting on data import process

New features:
- Script to upload files to /grape/data_import/upload and optionally process it
- Modular grape-manage script that will replace manage.sh

1.0.7:
Bug fixes:
- Tables with 'all' SELECT permission did not pick up as allowed
- When a user's password is NULL, any password would work
- Fix the storage of user save data in grape.user_history

New features:
- HTTP Authentication is now supported
- Support for IP filters on users
- Caching of compiled public JS files (and new config option cache_public_js_dirs to enable it)

- New API call PGTableInformation
- New view grape.v_table_permissions
- New view grape.v_active_users
- New function grape.year_diff
- New function grape.table_permissions_add with overloads
- New setting: user_ip_filter

Removed features:
- Removed the support for reading session ID from cookies
- Removed deprecated functionality that will send index.html if an API file could not be matched
- Removed HSTORE extension from schema
- Removed System user

Other:
- Change data type of grape.user_history.data to JSONB - thereby removing the need for the HSTORE extension
- Bumped package versions

1.0.8
- New config setting process_name sets the visible process(es) name(s)
- Removed "publicPath" from app settings (in favour of "public_directories")
- Notification subsystem
- New tool to set up a database: grape-db-setup
- User save will not change the password if it is not provided
- HTTPS support for GrapeClient (also applies to grape-query)
- Removed lookup schema and tables from grape (this includes: lookup.relationship, lookup.bank_branch and lookup.valid_bank_name)

